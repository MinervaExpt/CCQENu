New script that submits a job to the grid. ~\newline


This is intended for CCQEMAT, which has an executable a config file and a prescale

Your MAT distribution should be in the base directory (\$\+BASEDIR) and the whole thing gets tarred up and sent.

On Unix, you need to (ONCE)


\begin{DoxyCode}{0}
\DoxyCodeLine{And\ at\ each\ session\ you\ need\ to\ }
\DoxyCodeLine{}
\DoxyCodeLine{```setup\ jobsub\_client```\ \ \#\ and\ whatever\ you\ need\ to\ get\ root.\ }
\DoxyCodeLine{}
\DoxyCodeLine{Your\ executable\ should\ be\ in\ a\ subdirectory\ which\ is\ RELATIVE\ to\ `\$BASEDIR`\ -\/\ ie\ `CCQENu/make\_hists`\ or\ something\ similar.\ }
\DoxyCodeLine{}
\DoxyCodeLine{you\ then\ invoke\ `SubmitJobsToGrid\_MAT.py`\ with\ your\ config\ and\ playlists\ and\ the\ results\ come\ back\ in\ a\ tagged\ subdirectory\ of\ `-\/-\/outdir`}
\DoxyCodeLine{}
\DoxyCodeLine{Here\ is\ an\ example\ how\ it\ works.\ \ You\ can\ find\ this\ in\ file\ `testp4.sh`}
\DoxyCodeLine{}
\DoxyCodeLine{My\ whole\ MAT\ setup\ is\ in\ `\$APP/NEWMAT`\ so\ that\ needs\ to\ go\ into\ the\ tarball.}
\DoxyCodeLine{The\ directory\ I\ run\ the\ MAT\ from\ is\ `\$APP/NEWMAT/CCQENu/make\_hists`\ so\ I\ set\ RUNDIR\ to\ that}

\end{DoxyCode}
 export APP=/exp/minerva/app/users/\$\+USER export SCRATCH=/pnfs/minerva/scratch/users/\$\+USER export BLUE=/exp/minerva/data/users/\$\+USER ~\newline


export BASEDIR=\$\+APP/\+MNV9 \# YOU NEED TO CHANGE THIS TO WHERE YOUR MAT CODE IS !!!!!!!!!

python \$\+BASEDIR/\+CCQENu/utilities/\+Submit\+Jobs\+To\+Grid\+\_\+\+MAT.py --stage=CCQEMAT --outdir=\$\+SCRATCH/test \textbackslash{} --basedir=\$\+BASEDIR --rundir=CCQENu/make\+\_\+hists --playlist=minervame5A --model=Mnv\+Tunev2 --tag=test\+P4 \textbackslash{} --mail --prescale=1 --config=p4\+\_\+test --exe=sidebands\+\_\+v2 --sample=QElike --setup=CCQENu/utilities/setup\+\_\+batch\+\_\+mat9.\+sh \textbackslash{} --tmpdir=\$\+SCRATCH/tmp --expected-\/lifetime=24h --memory=3000 \#--debug --notimestamp


\begin{DoxyCode}{0}
\DoxyCodeLine{`setup\_batch\_mat9.sh`\ is\ the\ setup\ script\ that\ runs\ on\ the\ remote\ node.\ This\ is\ for\ Alma9.\ \ If\ you\ need\ to\ run\ on\ SL7,\ use\ the\ old\ `setup\_batch\_mat.sh`}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{You\ will\ want\ to\ measure\ the\ memory\ and\ time\ for\ a\ job,\ memory\ is\ pretty\ constant\ from\ playlist\ to\ playlist\ but\ expect\ to\ use\ time\ of\ about\ 5\ x\ the\ 5A\ time\ for\ the\ longest.}
\DoxyCodeLine{}
\DoxyCodeLine{The\ script\ bigsub.sh\ can\ make\ your\ submit\ file\ (like\ the\ above)\ into\ a\ full\ expt\ submit\ for\ AntiNeutrino.\ }
\DoxyCodeLine{}
\DoxyCodeLine{`./bigsub.sh\ testp4.sh\ `\ \ }
\DoxyCodeLine{}
\DoxyCodeLine{creates\ `bigtestp4.sh.sh`\ \ \ }
\DoxyCodeLine{}
\DoxyCodeLine{Here\ is\ the\ help\ file}
\DoxyCodeLine{}
\DoxyCodeLine{`python\ SubmitJobsToGrid\_MAT.py\ -\/-\/help`}
\DoxyCodeLine{}
\DoxyCodeLine{```Usage:\ SubmitJobsToGrid\_MAT.py[opts]}
\DoxyCodeLine{}
\DoxyCodeLine{Options:}
\DoxyCodeLine{\ \ -\/h,\ -\/-\/help\ \ \ \ \ \ \ \ \ \ \ \ show\ this\ help\ message\ and\ exit}
\DoxyCodeLine{\ \ -\/-\/outdir=OUTDIR\ \ \ \ \ \ \ Directory\ to\ write\ tagged\ output\ directory\ to}
\DoxyCodeLine{\ \ -\/-\/tardir=TARDIR\ \ \ \ \ \ \ Tarball\ location}
\DoxyCodeLine{\ \ -\/-\/basedir=BASEDIRPATH}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Base\ directory\ for\ making\ tarball\ (full\ path)}
\DoxyCodeLine{\ \ -\/-\/rundir=RUNDIR\ \ \ \ \ \ \ relative\ path\ in\ basedir\ for\ the\ directory\ you\ run}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ from,\ if\ different}
\DoxyCodeLine{\ \ -\/-\/setup=SETUP\ \ \ \ \ \ \ \ \ relative\ path\ in\ basedir\ to\ the\ setup\ script}
\DoxyCodeLine{\ \ -\/-\/config=CONFIG\ \ \ \ \ \ \ relative\ path\ in\ rundir\ for\ json\ config\ file\ (CCQEMAT)}
\DoxyCodeLine{\ \ -\/-\/stage=STAGE\ \ \ \ \ \ \ \ \ Process\ type}
\DoxyCodeLine{\ \ -\/-\/sample=SAMPLE\ \ \ \ \ \ \ Sample\ type}
\DoxyCodeLine{\ \ -\/-\/playlist=PLAYLIST\ \ \ Playlist\ type}
\DoxyCodeLine{\ \ -\/-\/playlist=PLAYLIST\ \ \ Playlist\ type}
\DoxyCodeLine{\ \ -\/-\/model=MODEL\ \ \ \ \ \ \ \ \ [OPTIONAL]\ Model\ tune\ type\ to\ set\ \$MYMODEL\ for}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MinervaModel.\ Defaults\ to\ MnvTunev1}
\DoxyCodeLine{\ \ -\/-\/prescale=PRESCALE\ \ \ Prescale\ MC\ by\ this\ factor\ (CCQEMAT)}
\DoxyCodeLine{\ \ -\/-\/tag=TAG\ \ \ \ \ \ \ \ \ \ \ \ \ Tag\ your\ release}
\DoxyCodeLine{\ \ -\/-\/mail\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Want\ mail\ after\ job\ completion\ or\ failure}
\DoxyCodeLine{\ \ -\/-\/sametar\ \ \ \ \ \ \ \ \ \ \ \ \ Recycle\ the\ same\ tar\ file\ for\ jobsubmission}
\DoxyCodeLine{\ \ -\/-\/tarfilename=TARFILENAME}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Name\ of\ the\ tarfile\ you\ want\ to\ use}
\DoxyCodeLine{\ \ -\/-\/memory=MEMORY\ \ \ \ \ \ \ memory\ request\ in\ MB}
\DoxyCodeLine{\ \ -\/-\/notimestamp\ \ \ \ \ \ \ \ \ Flag\ to\ TURN\ OFF\ time\ stamp\ in\ the\ tag}
\DoxyCodeLine{\ \ -\/-\/debug\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ debug\ script\ locally\ so\ no\ ifdh}
\DoxyCodeLine{\ \ -\/-\/tmpdir=TMPDIR\ \ \ \ \ \ \ temporary\ local\ directory\ to\ store\ tarfile\ during\ this}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script}
\DoxyCodeLine{\ \ -\/-\/exe=THEEXE\ \ \ \ \ \ \ \ \ \ relative\ path\ for\ the\ executable\ (CCQEMAT)}
\DoxyCodeLine{\ \ -\/-\/expected-\/lifetime=LIFETIME}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ job\ lifetime\ in\ format\ like\ 12h,\ 1d,\ 60m}

\end{DoxyCode}
 