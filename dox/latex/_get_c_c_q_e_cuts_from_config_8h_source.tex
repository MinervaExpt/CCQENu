\hypertarget{_get_c_c_q_e_cuts_from_config_8h_source}{}\doxysection{Get\+CCQECuts\+From\+Config.\+h}
\label{_get_c_c_q_e_cuts_from_config_8h_source}\index{make\_hists/include/GetCCQECutsFromConfig.h@{make\_hists/include/GetCCQECutsFromConfig.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef GETCCQECUTSFromConfig\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define GETCCQECUTSFromConfig\_H}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include "{}PlotUtils/Cut.h"{}}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}include/CVUniverse.h"{}}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}include/CutFromConfig.h"{}}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}utils/NuConfig.h"{}}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{keyword}{namespace }config\_reco \{}
\DoxyCodeLine{10 \textcolor{comment}{//============================================================================}}
\DoxyCodeLine{11 \textcolor{comment}{// This function instantiates each of the above cuts and adds them to a}}
\DoxyCodeLine{12 \textcolor{comment}{// container, over which we'll loop during our event selection to apply the}}
\DoxyCodeLine{13 \textcolor{comment}{// cuts.}}
\DoxyCodeLine{14 \textcolor{comment}{//}}
\DoxyCodeLine{15 \textcolor{comment}{// The return type for this function is a `cuts\_t<UNIVERSE, EVENT>`, which is}}
\DoxyCodeLine{16 \textcolor{comment}{// shorthand for std::vector<std::unique\_ptr<PlotUtils::Cut<UNIVERSE, EVENT>>>;}}
\DoxyCodeLine{17 \textcolor{comment}{//============================================================================}}
\DoxyCodeLine{18 \textcolor{keyword}{template} <\textcolor{keyword}{class} UNIVERSE, \textcolor{keyword}{class} EVENT = PlotUtils::detail::empty>}
\DoxyCodeLine{19 PlotUtils::cuts\_t<UNIVERSE> GetCCQECutsFromConfig(\mbox{\hyperlink{class_nu_config}{NuConfig}} \& config )}
\DoxyCodeLine{20 \{}
\DoxyCodeLine{21   \textcolor{keyword}{typedef} std::function<double(\textcolor{keyword}{const} UNIVERSE\&)> PointerToCVUniverseFunction;}
\DoxyCodeLine{22   PlotUtils::cuts\_t<UNIVERSE, EVENT> ccqe\_cuts;}
\DoxyCodeLine{23   std::cout << \textcolor{stringliteral}{"{} set up the cuts"{}} << std::endl;}
\DoxyCodeLine{24   \textcolor{comment}{// event cuts}}
\DoxyCodeLine{25   \textcolor{comment}{//std::vector<std::string>  cuts= config.GetKeys();}}
\DoxyCodeLine{26   std::vector<NuConfig> cuts = config.GetConfigVector();}
\DoxyCodeLine{27   \mbox{\hyperlink{class_c_v_functions}{CVFunctions<UNIVERSE>}} fun;}
\DoxyCodeLine{28   \textcolor{comment}{// event cuts}}
\DoxyCodeLine{29 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new NoDeadtime<UNIVERSE, EVENT>(config.GetValue("{}NoDeadTime"{})));}}
\DoxyCodeLine{30 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new Apothem<UNIVERSE>(config.GetValue("{}Apothem"{})));}}
\DoxyCodeLine{31 \textcolor{comment}{//  //ccqe\_cuts.emplace\_back(new ZRange<UNIVERSE>(config.GetValue("{}ZRange"{}))); // replace with generic}}
\DoxyCodeLine{32 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new RangeFromConfig<UNIVERSE,double,\&UNIVERSE::GetZVertex, EVENT>(config.GetValue("{}ZRange"{})));}}
\DoxyCodeLine{33 \textcolor{comment}{//  // muon cuts}}
\DoxyCodeLine{34 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new HasMINOSMatch<UNIVERSE, EVENT>(config.GetValue("{}HasMINOSMatch"{})));}}
\DoxyCodeLine{35 \textcolor{comment}{//  //ccqe\_cuts.emplace\_back(new IsNeutrino<UNIVERSE, EVENT>(config.GetValue("{}IsNeutrino"{})));}}
\DoxyCodeLine{36 \textcolor{comment}{//  //ccqe\_cuts.emplace\_back(new MaxMuonAngle<UNIVERSE, EVENT>(config.GetValue("{}MaxMuonAngle"{})));}}
\DoxyCodeLine{37 \textcolor{comment}{// // ccqe\_cuts.emplace\_back(new MuonMomentumMin<UNIVERSE, EVENT>(config.GetValue("{}MuonMomentumMin"{})));}}
\DoxyCodeLine{38 \textcolor{comment}{// // ccqe\_cuts.emplace\_back(new MuonMomentumMax<UNIVERSE, EVENT>(config.GetValue("{}MuonMomentumMax"{})));}}
\DoxyCodeLine{39 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new MaximumFromConfig<UNIVERSE,double,\&UNIVERSE::GetThetamuDegrees>(config.GetValue("{}MaxMuonAngle"{})));}}
\DoxyCodeLine{40 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new MinimumFromConfig<UNIVERSE,double,\&UNIVERSE::GetPmuGeV, EVENT>(config.GetValue("{}MuonMomentumMin"{})));}}
\DoxyCodeLine{41 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new MaximumFromConfig<UNIVERSE,double,\&UNIVERSE::GetPmuGeV, EVENT>(config.GetValue("{}MuonMomentumMax"{})));}}
\DoxyCodeLine{42 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new MaximumFromConfigFunc<UNIVERSE>(config.GetConfig("{}MuonMomentumMax"{}),fun));}}
\DoxyCodeLine{43 \textcolor{comment}{//  // recoil cuts}}
\DoxyCodeLine{44 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new MaxMultiplicity<UNIVERSE, EVENT>(config.GetValue("{}MaxMultiplicity"{})));}}
\DoxyCodeLine{45 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new GoodRecoil<UNIVERSE, EVENT>(config.GetValue("{}GoodRecoil"{})));}}
\DoxyCodeLine{46   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} cut:cuts)\{}
\DoxyCodeLine{47     std::string key = cut.GetString(\textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{48     \textcolor{comment}{//NuConfig cut(config.GetConfig(key)); // make a subconfig}}
\DoxyCodeLine{49     std::string variable = cut.GetString(\textcolor{stringliteral}{"{}variable"{}});}
\DoxyCodeLine{50     std::cout << \textcolor{stringliteral}{"{} set up cut "{}} << key << \textcolor{stringliteral}{"{} using variable "{}} << variable << std::endl;}
\DoxyCodeLine{51     \textcolor{keywordflow}{if}( cut.IsMember(\textcolor{stringliteral}{"{}equals"{}}))\{}
\DoxyCodeLine{52       ccqe\_cuts.emplace\_back( \textcolor{keyword}{new} IsSameFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{53     \}}
\DoxyCodeLine{54     \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{55       \textcolor{keywordflow}{if} (cut.IsMember(\textcolor{stringliteral}{"{}min"{}}) and cut.IsMember(\textcolor{stringliteral}{"{}max"{}}))\{}
\DoxyCodeLine{56         ccqe\_cuts.emplace\_back( \textcolor{keyword}{new} RangeFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{57       \}}
\DoxyCodeLine{58       \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{59         \textcolor{keywordflow}{if}( cut.IsMember(\textcolor{stringliteral}{"{}max"{}}))\{}
\DoxyCodeLine{60           ccqe\_cuts.emplace\_back( \textcolor{keyword}{new} MaximumFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{61         \}}
\DoxyCodeLine{62         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{63           \textcolor{keywordflow}{if}( cut.IsMember(\textcolor{stringliteral}{"{}min"{}}))\{}
\DoxyCodeLine{64             ccqe\_cuts.emplace\_back( \textcolor{keyword}{new} MinimumFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{65           \}}
\DoxyCodeLine{66           \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{67             std::cout << \textcolor{stringliteral}{"{} asked for a cut without a valid type "{}} << key << std::endl;}
\DoxyCodeLine{68             exit(8);}
\DoxyCodeLine{69           \}}
\DoxyCodeLine{70         \}}
\DoxyCodeLine{71       \}}
\DoxyCodeLine{72     \}}
\DoxyCodeLine{73   \}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 }
\DoxyCodeLine{76   \textcolor{keywordflow}{return} ccqe\_cuts;}
\DoxyCodeLine{77 \}}
\DoxyCodeLine{78 }
\DoxyCodeLine{79 \textcolor{comment}{// don't need this as can configure it.}}
\DoxyCodeLine{80 }
\DoxyCodeLine{81 \textcolor{comment}{//template <class UNIVERSE, class EVENT = PlotUtils::detail::empty>}}
\DoxyCodeLine{82 \textcolor{comment}{//PlotUtils::cuts\_t<UNIVERSE, EVENT> GetCCQENuCuts()}}
\DoxyCodeLine{83 \textcolor{comment}{//\{}}
\DoxyCodeLine{84 \textcolor{comment}{//  PlotUtils::cuts\_t<UNIVERSE, EVENT> ccqe\_cuts;}}
\DoxyCodeLine{85 \textcolor{comment}{//  std::cout << "{} set up the cuts"{} << std::endl;}}
\DoxyCodeLine{86 \textcolor{comment}{//  // event cuts}}
\DoxyCodeLine{87 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new NoDeadtime<UNIVERSE, EVENT>(1, "{}Deadtime"{}));}}
\DoxyCodeLine{88 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new Apothem<UNIVERSE>(850.));}}
\DoxyCodeLine{89 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new ZRange<UNIVERSE>("{}Tracker"{}, 5980, 8422));}}
\DoxyCodeLine{90 \textcolor{comment}{//  // muon cuts}}
\DoxyCodeLine{91 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new HasMINOSMatch<UNIVERSE, EVENT>());}}
\DoxyCodeLine{92 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new IsNeutrino<UNIVERSE, EVENT>(true));}}
\DoxyCodeLine{93 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new MaxMuonAngle<UNIVERSE, EVENT>(20.));}}
\DoxyCodeLine{94 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new MuonMomentumMin<UNIVERSE, EVENT>(1.5, "{}Minimum Pmu"{}));}}
\DoxyCodeLine{95 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new MuonMomentumMax<UNIVERSE, EVENT>(20., "{}Maximum Pmu"{}));}}
\DoxyCodeLine{96 \textcolor{comment}{//  // recoil cuts}}
\DoxyCodeLine{97 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new MaxMultiplicity<UNIVERSE, EVENT>(2));}}
\DoxyCodeLine{98 \textcolor{comment}{//  ccqe\_cuts.emplace\_back(new GoodRecoil<UNIVERSE, EVENT>());}}
\DoxyCodeLine{99 \textcolor{comment}{//  return ccqe\_cuts;}}
\DoxyCodeLine{100 \textcolor{comment}{//\}}}
\DoxyCodeLine{101 }
\DoxyCodeLine{102 }
\DoxyCodeLine{103 }
\DoxyCodeLine{104 \}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \textcolor{keyword}{namespace }config\_truth\{}
\DoxyCodeLine{107 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/signal}}
\DoxyCodeLine{108 }
\DoxyCodeLine{109 \textcolor{keyword}{template} <\textcolor{keyword}{class} UNIVERSE>}
\DoxyCodeLine{110 PlotUtils::constraints\_t<UNIVERSE> GetCCQEPhaseSpaceFromConfig(\mbox{\hyperlink{class_nu_config}{NuConfig}} \& config)}
\DoxyCodeLine{111 \{}
\DoxyCodeLine{112  }
\DoxyCodeLine{113 }
\DoxyCodeLine{114 \textcolor{comment}{//  signalDef.emplace\_back(new MaximumConstraintFromConfig<UNIVERSE,double,\&UNIVERSE::GetTrueThetamuDegrees>(config.GetValue("{}MaxMuonAngle"{})));}}
\DoxyCodeLine{115 \textcolor{comment}{//  signalDef.emplace\_back(new MinimumConstraintFromConfig<UNIVERSE,double,\&UNIVERSE::GetTruePmuGeV>(config.GetValue("{}MuonMomentumMin"{})));}}
\DoxyCodeLine{116 \textcolor{comment}{//  signalDef.emplace\_back(new MaximumConstraintFromConfig<UNIVERSE,double,\&UNIVERSE::GetTruePmuGeV>(config.GetValue("{}MuonMomentumMax"{})));}}
\DoxyCodeLine{117 \textcolor{comment}{//  signalDef.emplace\_back(new Apothem<UNIVERSE>(config.GetValue("{}Apothem"{})));}}
\DoxyCodeLine{118 \textcolor{comment}{//  signalDef.emplace\_back(new RangeConstraintFromConfig<UNIVERSE,double,\&UNIVERSE::GetTrueZVertex>(config.GetValue("{}ZRange"{})));}}
\DoxyCodeLine{119 \textcolor{comment}{//}}
\DoxyCodeLine{120   }
\DoxyCodeLine{121     \textcolor{keyword}{typedef} std::function<double(\textcolor{keyword}{const} UNIVERSE\&)> PointerToCVUniverseFunction;}
\DoxyCodeLine{122     PlotUtils::constraints\_t<UNIVERSE> signalDef;}
\DoxyCodeLine{123     std::cout << \textcolor{stringliteral}{"{} set up the constraints "{}} << std::endl;}
\DoxyCodeLine{124     \textcolor{comment}{// event cuts}}
\DoxyCodeLine{125      std::vector<NuConfig> cuts = config.GetConfigVector();}
\DoxyCodeLine{126     }
\DoxyCodeLine{127     \mbox{\hyperlink{class_c_v_functions}{CVFunctions<UNIVERSE>}} fun;}
\DoxyCodeLine{128  }
\DoxyCodeLine{129   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} cut:cuts)\{}
\DoxyCodeLine{130       std::string key = cut.GetString(\textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{131       std::string variable = cut.GetString(\textcolor{stringliteral}{"{}variable"{}});}
\DoxyCodeLine{132       std::cout << \textcolor{stringliteral}{"{} set up phase space  "{}} << key << \textcolor{stringliteral}{"{} using variable "{}} << variable << std::endl;}
\DoxyCodeLine{133       \textcolor{keywordflow}{if}( cut.IsMember(\textcolor{stringliteral}{"{}equals"{}}))\{}
\DoxyCodeLine{134         signalDef.emplace\_back( \textcolor{keyword}{new} IsSameConstraintFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{135       \}}
\DoxyCodeLine{136       \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{137         \textcolor{keywordflow}{if} (cut.IsMember(\textcolor{stringliteral}{"{}min"{}}) and cut.IsMember(\textcolor{stringliteral}{"{}max"{}}))\{}
\DoxyCodeLine{138           signalDef.emplace\_back( \textcolor{keyword}{new} RangeConstraintFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{139         \}}
\DoxyCodeLine{140         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{141           \textcolor{keywordflow}{if}( cut.IsMember(\textcolor{stringliteral}{"{}max"{}}))\{}
\DoxyCodeLine{142             signalDef.emplace\_back( \textcolor{keyword}{new} MaximumConstraintFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{143           \}}
\DoxyCodeLine{144           \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{145             \textcolor{keywordflow}{if}( cut.IsMember(\textcolor{stringliteral}{"{}min"{}}))\{}
\DoxyCodeLine{146               signalDef.emplace\_back( \textcolor{keyword}{new} MinimumConstraintFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{147             \}}
\DoxyCodeLine{148             \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{149               std::cout << \textcolor{stringliteral}{"{} asked for a signalDef without a valid type "{}} << key << std::endl;}
\DoxyCodeLine{150               exit(8);}
\DoxyCodeLine{151             \}}
\DoxyCodeLine{152           \}}
\DoxyCodeLine{153         \}}
\DoxyCodeLine{154       \}}
\DoxyCodeLine{155     \}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157   \textcolor{keywordflow}{return} signalDef;}
\DoxyCodeLine{158 \}}
\DoxyCodeLine{159 }
\DoxyCodeLine{160 }
\DoxyCodeLine{161 }
\DoxyCodeLine{162 \textcolor{comment}{// CCQELike -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ // this is actually identical to the fiducial stuff}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 \textcolor{keyword}{template} <\textcolor{keyword}{class} UNIVERSE>}
\DoxyCodeLine{165 PlotUtils::constraints\_t<UNIVERSE> GetCCQESignalFromConfig(\mbox{\hyperlink{class_nu_config}{NuConfig}} \& config)}
\DoxyCodeLine{166 \{}
\DoxyCodeLine{167     \textcolor{keyword}{typedef} std::function<double(\textcolor{keyword}{const} UNIVERSE\&)> PointerToCVUniverseFunction;}
\DoxyCodeLine{168     PlotUtils::constraints\_t<UNIVERSE> signalDef;}
\DoxyCodeLine{169     std::cout << \textcolor{stringliteral}{"{} set up the constraints "{}} << std::endl;}
\DoxyCodeLine{170     \textcolor{comment}{// event cuts}}
\DoxyCodeLine{171   std::vector<NuConfig> cuts = config.GetConfigVector();}
\DoxyCodeLine{172     \mbox{\hyperlink{class_c_v_functions}{CVFunctions<UNIVERSE>}} fun;}
\DoxyCodeLine{173 }
\DoxyCodeLine{174     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} cut:cuts)\{}
\DoxyCodeLine{175       std::string key = cut.GetString(\textcolor{stringliteral}{"{}name"{}});\textcolor{comment}{// make a subconfig}}
\DoxyCodeLine{176       std::string variable = cut.GetString(\textcolor{stringliteral}{"{}variable"{}});}
\DoxyCodeLine{177       std::cout << \textcolor{stringliteral}{"{} set up signal definition  "{}} << key << \textcolor{stringliteral}{"{} using variable "{}} << variable << std::endl;}
\DoxyCodeLine{178       \textcolor{keywordflow}{if}( cut.IsMember(\textcolor{stringliteral}{"{}equals"{}}))\{}
\DoxyCodeLine{179         signalDef.emplace\_back( \textcolor{keyword}{new} IsSameConstraintFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{180       \}}
\DoxyCodeLine{181       \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{182         \textcolor{keywordflow}{if} (cut.IsMember(\textcolor{stringliteral}{"{}min"{}}) and cut.IsMember(\textcolor{stringliteral}{"{}max"{}}))\{}
\DoxyCodeLine{183           signalDef.emplace\_back( \textcolor{keyword}{new} RangeConstraintFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{184         \}}
\DoxyCodeLine{185         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{186           \textcolor{keywordflow}{if}( cut.IsMember(\textcolor{stringliteral}{"{}max"{}}))\{}
\DoxyCodeLine{187             signalDef.emplace\_back( \textcolor{keyword}{new} MaximumConstraintFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{188           \}}
\DoxyCodeLine{189           \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{190             \textcolor{keywordflow}{if}( cut.IsMember(\textcolor{stringliteral}{"{}min"{}}))\{}
\DoxyCodeLine{191               signalDef.emplace\_back( \textcolor{keyword}{new} MinimumConstraintFromConfigFunc<UNIVERSE>(cut,fun));}
\DoxyCodeLine{192             \}}
\DoxyCodeLine{193             \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{194               std::cout << \textcolor{stringliteral}{"{} asked for a signalDef without a valid type "{}} << key << std::endl;}
\DoxyCodeLine{195               exit(8);}
\DoxyCodeLine{196             \}}
\DoxyCodeLine{197           \}}
\DoxyCodeLine{198         \}}
\DoxyCodeLine{199       \}}
\DoxyCodeLine{200     \}}
\DoxyCodeLine{201 }
\DoxyCodeLine{202   \textcolor{keywordflow}{return} signalDef;}
\DoxyCodeLine{203 \}}
\DoxyCodeLine{204 }
\DoxyCodeLine{205 }
\DoxyCodeLine{206 \} \textcolor{comment}{// end namespace}}
\DoxyCodeLine{207 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
